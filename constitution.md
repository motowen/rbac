<!--
Sync Impact Report
- Version change: template → 1.0.0
- Modified principles:
  - Core Principles: 5 個具體原則（高品質與可維護性、可測試性優先、MVP／漸進式交付、簡單優先避免過度設計、一致性與自動化）
- Added sections:
  - SECTION_2: 額外技術與品質約束
  - SECTION_3: 開發流程與品質關卡
- Removed sections:
  - 無（將原本模板中的所有章節具體化）
- Templates requiring updates:
  - .specify/templates/plan-template.md ✅（Constitution Check 說明與原則對齊）
  - .specify/templates/spec-template.md ✅（維持既有「獨立可測試 MVP」敘述，與憲章一致）
  - .specify/templates/tasks-template.md ✅（強調以 MVP 與獨立可測試故事為單位）
  - .specify/templates/checklist-template.md ✅（僅確認無與舊憲章衝突之處，無需更動）
  - .specify/templates/commands/* ⚠（目錄不存在，無法檢查或更新命令模板）
- Deferred TODOs:
  - 無
-->

# RBAC 專案憲章

## 核心原則（Core Principles）

### 原則一：高品質且可維護的程式碼

- 所有程式碼必須通過靜態檢查與自動化測試，PR 才能合併。  
- 程式碼必須遵守專案既定的程式風格與目錄結構，不得任意發明新模式。  
- 重複邏輯必須透過合理抽取（函式、模組）消除，但不得為了「可能的未來需求」提前抽象。  
- 對外行為變更（API、CLI、schema）必須在 spec 或文件中有明確說明與範例。  

**理由**：高品質與一致的結構能降低維護成本，讓每次修改都可預期且可回溯。

### 原則二：可測試性為一等公民

- 每一項需求必須能以自動化測試驗證（單元、整合或契約測試），否則視為需求未定義完成。  
- 新功能在實作前必須先明確描述「如何驗證」，並在 tasks 中標示對應測試工作。  
- Bug 修正必須附帶至少一個會在修正前失敗、修正後通過的測試案例。  
- 測試不得依賴不穩定外部環境（如真實第三方服務）；需要時必須透過 stub/mock 或 sandbox。  

**理由**：可測試性使行為可被驗證與重現，是長期演進與 refactor 的前提。

### 原則三：MVP／漸進式交付

- 每項功能必須先定義最小可行產品（MVP），以「單一使用者旅程」為基本切割單位。  
- 規劃與任務分解必須確保：完成任一優先故事（P1、P2…）即可形成可展示、可驗證的增量。  
- 規劃中若出現「一次做完所有情境」的任務，必須拆分為多個可獨立發布的切片。  
- 若無法清楚說明某任務完成後的「可見價值」與「驗證方法」，該任務不得開始實作。  

**理由**：MVP 與漸進交付降低風險，讓團隊能快速學習與迭代，而非一次性大爆發。

### 原則四：簡單優先，避免過度設計

- 在沒有明確需求或實證痛點前，不得引入過度複雜的架構、模式或抽象。  
- 每次設計決策必須能以一句話說明「現在就需要」的理由，否則採用較簡單方案。  
- 若新設計會增加跨模組耦合或全局影響，必須在 plan/spec 中寫下簡短「複雜度說明」與替代方案。  
- 禁止為了「未來可能擴充」而事先建立多層抽象或多專案切分，除非已有明確 roadmap 支持。  

**理由**：簡單設計更易於理解與修改，過度設計會放大不確定性與維護成本。

### 原則五：一致性與自動化

- 任何可自動檢查的規則（lint、format、test、型別檢查）必須優先自動化，而非仰賴人工檢查。  
- 專案的 PR 流程必須包含固定的品質關卡（測試、lint、憲章檢查），並盡量以 CI 具體實作。  
- 檔案結構、命名與分層（一專案／前後端／API…）必須在 plan 中先定義，實作不得偏離。  
- 若需要例外（如暫時關閉測試、跳過某關卡），必須在 PR 描述中寫明原因與追補計畫。  

**理由**：一致且自動化的流程讓品質檢查可重複、客觀，避免「人品驅動」的品質落差。

## 額外技術與品質約束

- **語言與風格**：  
  - 專案主要程式語言與框架需在各 feature 的 plan.md 中明確紀錄。  
  - 所有文件與 PR 描述一律使用正體中文為主，必要時可附英文術語。  
- **錯誤處理與可觀測性**：  
  - 所有對外 API／介面必須有明確錯誤格式與錯誤碼範圍。  
  - 關鍵流程必須有可追蹤的 log 或追蹤 ID，以支援問題排查。  
- **效能與安全**：  
  - 只在 spec/plan 中有明確效能或安全需求時才引入額外複雜度（快取、特殊資料結構等）。  
  - 若為滿足非功能性需求而增加複雜度，必須在 plan.md 中記錄目標與量測方式。  
- **文件**：  
  - 對外行為（API、CLI、合約）變更時，必須同步更新對應的 spec／quickstart／contracts 文件。  

## 開發流程與品質關卡

- **需求與規格**：  
  - 所有新功能必須先透過 `/speckit.specify` 產生 spec.md，描述使用者情境與獨立可測試的故事。  
  - 規格中必須明列優先順序（P1、P2…），並標示哪一個故事構成首個 MVP。  
- **規劃與設計**：  
  - 使用 `/speckit.plan` 產生 plan.md，明確描述技術背景、目錄結構與 Constitution Check 結果。  
  - 在 plan.md 中，任何與「可測試性」「MVP 切分」「簡單優先」衝突之設計，必須列入 Complexity Tracking。  
- **任務分解與實作**：  
  - 使用 `/speckit.tasks` 產生 tasks.md，以「使用者故事」為群組，每一故事可獨立實作與測試。  
  - 每個任務必須對應到具體檔案路徑與明確輸出（例如：新增測試、實作服務、更新文件）。  
- **品質關卡（Quality Gates）**：  
  - 合併 PR 前必須至少通過：自動測試、靜態分析／lint、憲章對齊（由 reviewer 或自動腳本檢查）。  
  - 發現違反憲章的變更時，PR 要嘛調整設計，要嘛先提出修憲提案，不得無視規則。  

## 治理機制（Governance）

- **憲章優先權**：  
  - 本憲章對於開發流程、品質與設計原則具有最高優先權，優先於個人習慣或歷史做法。  
- **修訂流程**：  
  - 任何對核心原則或治理流程的修改，必須透過 PR 直接修改本檔案，說明動機與影響。  
  - 若修改會與既有實作產生衝突，PR 中必須附上簡短遷移策略或分階段調整計畫。  
- **版本管理**：  
  - `CONSTITUTION_VERSION` 採用語意化版本：`MAJOR.MINOR.PATCH`。  
  - MAJOR：移除或大幅重寫原則，導致舊做法不再被接受。  
  - MINOR：新增原則或章節，或大幅擴充現有原則細節。  
  - PATCH：文字澄清、錯字修正、不改變實質規則之調整。  
- **遵循與稽核**：  
  - Reviewer 在審查 PR 時，必須明確檢查是否符合本憲章核心原則與開發流程。  
  - 至少每季應檢視一次憲章與實際做法是否一致，必要時提出修訂。  

**Version**: 1.0.0 | **Ratified**: 2025-12-03 | **Last Amended**: 2025-12-03
